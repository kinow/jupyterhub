

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Authenticators &#8212; JupyterHub 1.2.0dev documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Spawners" href="spawner.html" />
    <link rel="prev" title="Application configuration" href="app.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/logo.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../installation-guide.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting-started/index.html">Get Started</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../reference/index.html">Technical Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../index-admin.html">Administrator’s Guide</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">JupyterHub API</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../contributing/index.html">Contributing</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../index-about.html">About</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
        
          
              <li class="">
                  <a href="app.html">Application configuration</a>
              </li>
          
        
          
              <li class="active">
                  <a href="">Authenticators</a>
              </li>
          
        
          
              <li class="">
                  <a href="spawner.html">Spawners</a>
              </li>
          
        
          
              <li class="">
                  <a href="proxy.html">Proxies</a>
              </li>
          
        
          
              <li class="">
                  <a href="user.html">Users</a>
              </li>
          
        
          
              <li class="">
                  <a href="service.html">Services</a>
              </li>
          
        
          
              <li class="">
                  <a href="services.auth.html">Services Authentication</a>
              </li>
          
        
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#module-jupyterhub.auth" class="nav-link">Module: jupyterhub.auth</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#authenticator" class="nav-link">Authenticator</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#localauthenticator" class="nav-link">LocalAuthenticator</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#pamauthenticator" class="nav-link">PAMAuthenticator</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#dummyauthenticator" class="nav-link">DummyAuthenticator</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="authenticators">
<h1>Authenticators<a class="headerlink" href="#authenticators" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-jupyterhub.auth">
<span id="module-jupyterhub-auth"></span><h2>Module: <a class="reference internal" href="#module-jupyterhub.auth" title="jupyterhub.auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">jupyterhub.auth</span></code></a><a class="headerlink" href="#module-jupyterhub.auth" title="Permalink to this headline">¶</a></h2>
<p>Base Authenticator class and the default PAM Authenticator</p>
<div class="section" id="authenticator">
<h3><a class="reference internal" href="#jupyterhub.auth.Authenticator" title="jupyterhub.auth.Authenticator"><code class="xref py py-class docutils literal notranslate"><span class="pre">Authenticator</span></code></a><a class="headerlink" href="#authenticator" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.auth.Authenticator">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.auth.</code><code class="sig-name descname">Authenticator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for implementing an authentication provider for JupyterHub</p>
<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.admin_users">
<code class="sig-name descname">admin_users</code><em class="property"> c.Authenticator.admin_users = Set()</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.admin_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of users that will have admin rights on this JupyterHub.</p>
<dl class="simple">
<dt>Admin users have extra privileges:</dt><dd><ul class="simple">
<li><p>Use the admin panel to see list of users logged in</p></li>
<li><p>Add / remove users in some authenticators</p></li>
<li><p>Restart / halt the hub</p></li>
<li><p>Start / stop users’ single-user servers</p></li>
<li><p>Can access each individual users’ single-user server (if configured)</p></li>
</ul>
</dd>
</dl>
<p>Admin access should be treated the same way root access is.</p>
<p>Defaults to an empty set, in which case no user has admin access.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.auth_refresh_age">
<code class="sig-name descname">auth_refresh_age</code><em class="property"> c.Authenticator.auth_refresh_age = Int(300)</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.auth_refresh_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The max age (in seconds) of authentication info
before forcing a refresh of user auth info.</p>
<p>Refreshing auth info allows, e.g. requesting/re-validating auth tokens.</p>
<p>See <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> for what happens when user auth info is refreshed
(nothing by default).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.auto_login">
<code class="sig-name descname">auto_login</code><em class="property"> c.Authenticator.auto_login = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.auto_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically begin the login process</p>
<p>rather than starting with a “Login with…” link at <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code></p>
<p>To work, <code class="docutils literal notranslate"><span class="pre">.login_url()</span></code> must give a URL other than the default <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code>,
such as an oauth handler or another automatic login handler,
registered with <code class="docutils literal notranslate"><span class="pre">.get_handlers()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.blacklist">
<code class="sig-name descname">blacklist</code><em class="property"> c.Authenticator.blacklist = Set()</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklist of usernames that are not allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can not log in. This is an
additional blacklist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.enable_auth_state">
<code class="sig-name descname">enable_auth_state</code><em class="property"> c.Authenticator.enable_auth_state = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.enable_auth_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable persisting auth_state (if available).</p>
<p>auth_state will be encrypted and stored in the Hub’s database.
This can include things like authentication tokens, etc.
to be passed to Spawners as environment variables.</p>
<p>Encrypting auth_state requires the cryptography package.</p>
<p>Additionally, the JUPYTERHUB_CRYPT_KEY environment variable must
contain one (or more, separated by ;) 32B encryption keys.
These can be either base64 or hex-encoded.</p>
<p>If encryption is unavailable, auth_state cannot be persisted.</p>
<p>New in JupyterHub 0.8</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.post_auth_hook">
<code class="sig-name descname">post_auth_hook</code><em class="property"> c.Authenticator.post_auth_hook = Any(None)</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.post_auth_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional hook function that you can implement to do some
bootstrapping work during authentication. For example, loading user account
details from an external system.</p>
<p>This function is called after the user has passed all authentication checks
and is ready to successfully authenticate. This function must return the
authentication dict reguardless of changes to it.</p>
<p>This maybe a coroutine.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pwd</span>
<span class="k">def</span> <span class="nf">my_hook</span><span class="p">(</span><span class="n">authenticator</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">authentication</span><span class="p">):</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwnam</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="n">spawn_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pw_data&#39;</span><span class="p">:</span> <span class="n">user_data</span>
        <span class="s1">&#39;gid_list&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getgrouplist</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">user_data</span><span class="o">.</span><span class="n">pw_gid</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">][</span><span class="s1">&#39;spawn_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spawn_data</span>

    <span class="k">return</span> <span class="n">authentication</span>

<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">post_auth_hook</span> <span class="o">=</span> <span class="n">my_hook</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.refresh_pre_spawn">
<code class="sig-name descname">refresh_pre_spawn</code><em class="property"> c.Authenticator.refresh_pre_spawn = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.refresh_pre_spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force refresh of auth prior to spawn.</p>
<p>This forces <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> to be called prior to launching
a server, to ensure that auth state is up-to-date.</p>
<p>This can be important when e.g. auth tokens that may have expired
are passed to the spawner via environment variables from auth_state.</p>
<p>If refresh_user cannot refresh the user auth data,
launch will fail until the user logs in again.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.username_map">
<code class="sig-name descname">username_map</code><em class="property"> c.Authenticator.username_map = Dict()</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.username_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary mapping authenticator usernames to JupyterHub users.</p>
<p>Primarily used to normalize OAuth user names to local users.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.username_pattern">
<code class="sig-name descname">username_pattern</code><em class="property"> c.Authenticator.username_pattern = Unicode('')</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.username_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression pattern that all valid usernames must match.</p>
<p>If a username does not match the pattern specified here, authentication will not be attempted.</p>
<p>If not set, allow any username.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.Authenticator.whitelist">
<code class="sig-name descname">whitelist</code><em class="property"> c.Authenticator.whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.Authenticator.whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist of usernames that are allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can log in. This is an
additional whitelist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.add_user">
<code class="sig-name descname">add_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.add_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called when a user is added to JupyterHub</p>
<dl class="simple">
<dt>This is called:</dt><dd><ul class="simple">
<li><p>When a user first authenticates</p></li>
<li><p>When the hub restarts, for all users.</p></li>
</ul>
</dd>
</dl>
<p>This method may be a coroutine.</p>
<p>By default, this just adds the user to the whitelist.</p>
<p>Subclasses may do more extensive things, such as adding actual unix users,
but they should call super to ensure the whitelist is updated.</p>
<p>Note that this should be idempotent, since it is called whenever the hub restarts
for all users.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user</strong> (<a class="reference internal" href="user.html#jupyterhub.user.User" title="jupyterhub.user.User"><em>User</em></a>) – The User wrapper object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.authenticate">
<em class="property">async </em><code class="sig-name descname">authenticate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.authenticate" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate a user with login form data</p>
<p>This must be a coroutine.</p>
<p>It must return the username on successful authentication,
and return None on failed authentication.</p>
<p>Checking the whitelist is handled separately by the caller.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.8: </span>Allow <code class="docutils literal notranslate"><span class="pre">authenticate</span></code> to return a dict containing auth_state.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>tornado.web.RequestHandler</em>) – the current request handler</p></li>
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – The formdata of the login form.
The default form has ‘username’ and ‘password’ fields.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The username of the authenticated user,
or None if Authentication failed.</p>
<p>The Authenticator may return a dict instead, which MUST have a
key <code class="docutils literal notranslate"><span class="pre">name</span></code> holding the username, and MAY have two optional keys
set: <code class="docutils literal notranslate"><span class="pre">auth_state</span></code>, a dictionary of of auth state that will be
persisted; and <code class="docutils literal notranslate"><span class="pre">admin</span></code>, the admin setting value for the user.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>user (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a> or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.check_blacklist">
<code class="sig-name descname">check_blacklist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">authentication</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.check_blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a username is blocked to authenticate based on blacklist configuration</p>
<p>Return True if username is allowed, False otherwise.
No blacklist means any username is allowed.</p>
<p>Names are normalized <em>before</em> being checked against the blacklist.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.0: </span>Signature updated to accept authentication data as second argument</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.check_whitelist">
<code class="sig-name descname">check_whitelist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">authentication</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.check_whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a username is allowed to authenticate based on whitelist configuration</p>
<p>Return True if username is allowed, False otherwise.
No whitelist means any username is allowed.</p>
<p>Names are normalized <em>before</em> being checked against the whitelist.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.0: </span>Signature updated to accept authentication data and any future changes</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.delete_user">
<code class="sig-name descname">delete_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.delete_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called when a user is deleted</p>
<p>Removes the user from the whitelist.
Subclasses should call super to ensure the whitelist is updated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>user</strong> (<a class="reference internal" href="user.html#jupyterhub.user.User" title="jupyterhub.user.User"><em>User</em></a>) – The User wrapper object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.get_authenticated_user">
<em class="property">async </em><code class="sig-name descname">get_authenticated_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.get_authenticated_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate the user who is attempting to log in</p>
<p>Returns user dict if successful, None otherwise.</p>
<p>This calls <code class="docutils literal notranslate"><span class="pre">authenticate</span></code>, which should be overridden in subclasses,
normalizes the username if any normalization should be done,
and then validates the name in the whitelist.</p>
<p>This is the outer API for authenticating a user.
Subclasses should not override this method.</p>
<dl class="simple">
<dt>The various stages can be overridden separately:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">authenticate</span></code> turns formdata into a username</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normalize_username</span></code> normalizes the username</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_whitelist</span></code> checks against the user whitelist</p></li>
</ul>
</dd>
</dl>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 0.8: </span>return dict instead of username</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.get_handlers">
<code class="sig-name descname">get_handlers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.get_handlers" title="Permalink to this definition">¶</a></dt>
<dd><p>Return any custom handlers the authenticator needs to register</p>
<p>Used in conjugation with <code class="docutils literal notranslate"><span class="pre">login_url</span></code> and <code class="docutils literal notranslate"><span class="pre">logout_url</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>app</strong> (<em>JupyterHub Application</em>) – the application object, in case it needs to be accessed for info.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of <code class="docutils literal notranslate"><span class="pre">('/url',</span> <span class="pre">Handler)</span></code> tuples passed to tornado.
The Hub prefix is added to any URLs.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>handlers (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.is_admin">
<code class="sig-name descname">is_admin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">authentication</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.is_admin" title="Permalink to this definition">¶</a></dt>
<dd><p>Authentication helper to determine a user’s admin status.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>tornado.web.RequestHandler</em>) – the current request handler</p></li>
<li><p><strong>authentication</strong> – The authetication dict generated by <code class="docutils literal notranslate"><span class="pre">authenticate</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The admin status of the user, or None if it could not be
determined or should not change.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>admin_status (Bool or <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)">None</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.login_url">
<code class="sig-name descname">login_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.login_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Override this when registering a custom login handler</p>
<p>Generally used by authenticators that do not use simple form-based authentication.</p>
<p>The subclass overriding this is responsible for making sure there is a handler
available to handle the URL returned from this method, using the <code class="docutils literal notranslate"><span class="pre">get_handlers</span></code>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – the base URL of the Hub (e.g. /hub/)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The login URL, e.g. ‘/hub/login’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.logout_url">
<code class="sig-name descname">logout_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">base_url</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.logout_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Override when registering a custom logout handler</p>
<p>The subclass overriding this is responsible for making sure there is a handler
available to handle the URL returned from this method, using the <code class="docutils literal notranslate"><span class="pre">get_handlers</span></code>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>base_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – the base URL of the Hub (e.g. /hub/)</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The logout URL, e.g. ‘/hub/logout’</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.normalize_username">
<code class="sig-name descname">normalize_username</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.normalize_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the given username and return it</p>
<p>Override in subclasses if usernames need different normalization rules.</p>
<p>The default attempts to lowercase the username and apply <code class="docutils literal notranslate"><span class="pre">username_map</span></code> if it is
set.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.post_spawn_stop">
<code class="sig-name descname">post_spawn_stop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">spawner</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.post_spawn_stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called after stopping a user container</p>
<p>Can be used to do auth-related cleanup, e.g. closing PAM sessions.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.pre_spawn_start">
<code class="sig-name descname">pre_spawn_start</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">spawner</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.pre_spawn_start" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called before spawning a user’s server</p>
<p>Can be used to do auth-related startup, e.g. opening PAM sessions.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.refresh_user">
<em class="property">async </em><code class="sig-name descname">refresh_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em>, <em class="sig-param"><span class="n">handler</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.refresh_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Refresh auth data for a given user</p>
<p>Allows refreshing or invalidating auth data.</p>
<p>Only override if your authenticator needs
to refresh its data about users once in a while.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>user</strong> (<a class="reference internal" href="user.html#jupyterhub.user.User" title="jupyterhub.user.User"><em>User</em></a>) – the user to refresh</p></li>
<li><p><strong>handler</strong> (<em>tornado.web.RequestHandler</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – the current request handler</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>Return <strong>True</strong> if auth data for the user is up-to-date
and no updates are required.</p>
<p>Return <strong>False</strong> if the user’s auth data has expired,
and they should be required to login again.</p>
<p>Return a <strong>dict</strong> of auth data if some values should be updated.
This dict should have the same structure as that returned
by <a class="reference internal" href="#jupyterhub.auth.Authenticator.authenticate" title="jupyterhub.auth.Authenticator.authenticate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">authenticate()</span></code></a> when it returns a dict.
Any fields present will refresh the value for the user.
Any fields not present will be left unchanged.
This can include updating <code class="docutils literal notranslate"><span class="pre">.admin</span></code> or <code class="docutils literal notranslate"><span class="pre">.auth_state</span></code> fields.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>auth_data (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)">bool</a> or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.run_post_auth_hook">
<em class="property">async </em><code class="sig-name descname">run_post_auth_hook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">authentication</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.run_post_auth_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the post_auth_hook if defined</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>handler</strong> (<em>tornado.web.RequestHandler</em>) – the current request handler</p></li>
<li><p><strong>authentication</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – User authentication data dictionary. Contains the
username (‘name’), admin status (‘admin’), and auth state dictionary (‘auth_state’).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The hook must always return the authentication dict</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Authentication (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.Authenticator.validate_username">
<code class="sig-name descname">validate_username</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.Authenticator.validate_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a normalized username</p>
<p>Return True if username is valid, False otherwise.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="localauthenticator">
<h3><a class="reference internal" href="#jupyterhub.auth.LocalAuthenticator" title="jupyterhub.auth.LocalAuthenticator"><code class="xref py py-class docutils literal notranslate"><span class="pre">LocalAuthenticator</span></code></a><a class="headerlink" href="#localauthenticator" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.auth.LocalAuthenticator">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.auth.</code><code class="sig-name descname">LocalAuthenticator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for Authenticators that work with local Linux/UNIX users</p>
<p>Checks for local users, and can attempt to create them if they exist.</p>
<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.add_user_cmd">
<code class="sig-name descname">add_user_cmd</code><em class="property"> c.LocalAuthenticator.add_user_cmd = Command()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.add_user_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>The command to use for creating users as a list of strings</p>
<p>For each element in the list, the string USERNAME will be replaced with
the user’s username. The username will also be appended as the final argument.</p>
<p>For Linux, the default value is:</p>
<blockquote>
<div><p>[‘adduser’, ‘-q’, ‘–gecos’, ‘””’, ‘–disabled-password’]</p>
</div></blockquote>
<p>To specify a custom home directory, set this to:</p>
<blockquote>
<div><p>[‘adduser’, ‘-q’, ‘–gecos’, ‘””’, ‘–home’, ‘/customhome/USERNAME’, ‘–disabled-password’]</p>
</div></blockquote>
<p>This will run the command:</p>
<blockquote>
<div><p>adduser -q –gecos “” –home /customhome/river –disabled-password river</p>
</div></blockquote>
<p>when the user ‘river’ is created.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.admin_users">
<code class="sig-name descname">admin_users</code><em class="property"> c.LocalAuthenticator.admin_users = Set()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.admin_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of users that will have admin rights on this JupyterHub.</p>
<dl class="simple">
<dt>Admin users have extra privileges:</dt><dd><ul class="simple">
<li><p>Use the admin panel to see list of users logged in</p></li>
<li><p>Add / remove users in some authenticators</p></li>
<li><p>Restart / halt the hub</p></li>
<li><p>Start / stop users’ single-user servers</p></li>
<li><p>Can access each individual users’ single-user server (if configured)</p></li>
</ul>
</dd>
</dl>
<p>Admin access should be treated the same way root access is.</p>
<p>Defaults to an empty set, in which case no user has admin access.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.auth_refresh_age">
<code class="sig-name descname">auth_refresh_age</code><em class="property"> c.LocalAuthenticator.auth_refresh_age = Int(300)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.auth_refresh_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The max age (in seconds) of authentication info
before forcing a refresh of user auth info.</p>
<p>Refreshing auth info allows, e.g. requesting/re-validating auth tokens.</p>
<p>See <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> for what happens when user auth info is refreshed
(nothing by default).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.auto_login">
<code class="sig-name descname">auto_login</code><em class="property"> c.LocalAuthenticator.auto_login = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.auto_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically begin the login process</p>
<p>rather than starting with a “Login with…” link at <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code></p>
<p>To work, <code class="docutils literal notranslate"><span class="pre">.login_url()</span></code> must give a URL other than the default <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code>,
such as an oauth handler or another automatic login handler,
registered with <code class="docutils literal notranslate"><span class="pre">.get_handlers()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.blacklist">
<code class="sig-name descname">blacklist</code><em class="property"> c.LocalAuthenticator.blacklist = Set()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklist of usernames that are not allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can not log in. This is an
additional blacklist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.create_system_users">
<code class="sig-name descname">create_system_users</code><em class="property"> c.LocalAuthenticator.create_system_users = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.create_system_users" title="Permalink to this definition">¶</a></dt>
<dd><p>If set to True, will attempt to create local system users if they do not exist already.</p>
<p>Supports Linux and BSD variants only.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.enable_auth_state">
<code class="sig-name descname">enable_auth_state</code><em class="property"> c.LocalAuthenticator.enable_auth_state = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.enable_auth_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable persisting auth_state (if available).</p>
<p>auth_state will be encrypted and stored in the Hub’s database.
This can include things like authentication tokens, etc.
to be passed to Spawners as environment variables.</p>
<p>Encrypting auth_state requires the cryptography package.</p>
<p>Additionally, the JUPYTERHUB_CRYPT_KEY environment variable must
contain one (or more, separated by ;) 32B encryption keys.
These can be either base64 or hex-encoded.</p>
<p>If encryption is unavailable, auth_state cannot be persisted.</p>
<p>New in JupyterHub 0.8</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.group_whitelist">
<code class="sig-name descname">group_whitelist</code><em class="property"> c.LocalAuthenticator.group_whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.group_whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist all users from this UNIX group.</p>
<p>This makes the username whitelist ineffective.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.post_auth_hook">
<code class="sig-name descname">post_auth_hook</code><em class="property"> c.LocalAuthenticator.post_auth_hook = Any(None)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.post_auth_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional hook function that you can implement to do some
bootstrapping work during authentication. For example, loading user account
details from an external system.</p>
<p>This function is called after the user has passed all authentication checks
and is ready to successfully authenticate. This function must return the
authentication dict reguardless of changes to it.</p>
<p>This maybe a coroutine.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pwd</span>
<span class="k">def</span> <span class="nf">my_hook</span><span class="p">(</span><span class="n">authenticator</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">authentication</span><span class="p">):</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwnam</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="n">spawn_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pw_data&#39;</span><span class="p">:</span> <span class="n">user_data</span>
        <span class="s1">&#39;gid_list&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getgrouplist</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">user_data</span><span class="o">.</span><span class="n">pw_gid</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">][</span><span class="s1">&#39;spawn_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spawn_data</span>

    <span class="k">return</span> <span class="n">authentication</span>

<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">post_auth_hook</span> <span class="o">=</span> <span class="n">my_hook</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.refresh_pre_spawn">
<code class="sig-name descname">refresh_pre_spawn</code><em class="property"> c.LocalAuthenticator.refresh_pre_spawn = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.refresh_pre_spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force refresh of auth prior to spawn.</p>
<p>This forces <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> to be called prior to launching
a server, to ensure that auth state is up-to-date.</p>
<p>This can be important when e.g. auth tokens that may have expired
are passed to the spawner via environment variables from auth_state.</p>
<p>If refresh_user cannot refresh the user auth data,
launch will fail until the user logs in again.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.uids">
<code class="sig-name descname">uids</code><em class="property"> c.LocalAuthenticator.uids = Dict()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.uids" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of uids to use at user creation time.
This helps ensure that users created from the database
get the same uid each time they are created
in temporary deployments or containers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.username_map">
<code class="sig-name descname">username_map</code><em class="property"> c.LocalAuthenticator.username_map = Dict()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.username_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary mapping authenticator usernames to JupyterHub users.</p>
<p>Primarily used to normalize OAuth user names to local users.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.username_pattern">
<code class="sig-name descname">username_pattern</code><em class="property"> c.LocalAuthenticator.username_pattern = Unicode('')</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.username_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression pattern that all valid usernames must match.</p>
<p>If a username does not match the pattern specified here, authentication will not be attempted.</p>
<p>If not set, allow any username.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.LocalAuthenticator.whitelist">
<code class="sig-name descname">whitelist</code><em class="property"> c.LocalAuthenticator.whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist of usernames that are allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can log in. This is an
additional whitelist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.LocalAuthenticator.add_system_user">
<code class="sig-name descname">add_system_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.add_system_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new local UNIX user on the system.</p>
<p>Tested to work on FreeBSD and Linux, at least.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.LocalAuthenticator.add_user">
<em class="property">async </em><code class="sig-name descname">add_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.add_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Hook called whenever a new user is added</p>
<p>If self.create_system_users, the user will attempt to be created if it doesn’t exist.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.LocalAuthenticator.check_group_whitelist">
<code class="sig-name descname">check_group_whitelist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">authentication</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.check_group_whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>If group_whitelist is configured, check if authenticating user is part of group.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.LocalAuthenticator.check_whitelist">
<code class="sig-name descname">check_whitelist</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">username</span></em>, <em class="sig-param"><span class="n">authentication</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.check_whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a username is allowed to authenticate based on whitelist configuration</p>
<p>Return True if username is allowed, False otherwise.
No whitelist means any username is allowed.</p>
<p>Names are normalized <em>before</em> being checked against the whitelist.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.0: </span>Signature updated to accept authentication data and any future changes</p>
</div>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.auth.LocalAuthenticator.system_user_exists">
<code class="sig-name descname">system_user_exists</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">user</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.LocalAuthenticator.system_user_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the user exists on the system</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="pamauthenticator">
<h3><a class="reference internal" href="#jupyterhub.auth.PAMAuthenticator" title="jupyterhub.auth.PAMAuthenticator"><code class="xref py py-class docutils literal notranslate"><span class="pre">PAMAuthenticator</span></code></a><a class="headerlink" href="#pamauthenticator" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.auth.PAMAuthenticator">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.auth.</code><code class="sig-name descname">PAMAuthenticator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator" title="Permalink to this definition">¶</a></dt>
<dd><p>Authenticate local UNIX users with PAM</p>
<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.add_user_cmd">
<code class="sig-name descname">add_user_cmd</code><em class="property"> c.PAMAuthenticator.add_user_cmd = Command()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.add_user_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>The command to use for creating users as a list of strings</p>
<p>For each element in the list, the string USERNAME will be replaced with
the user’s username. The username will also be appended as the final argument.</p>
<p>For Linux, the default value is:</p>
<blockquote>
<div><p>[‘adduser’, ‘-q’, ‘–gecos’, ‘””’, ‘–disabled-password’]</p>
</div></blockquote>
<p>To specify a custom home directory, set this to:</p>
<blockquote>
<div><p>[‘adduser’, ‘-q’, ‘–gecos’, ‘””’, ‘–home’, ‘/customhome/USERNAME’, ‘–disabled-password’]</p>
</div></blockquote>
<p>This will run the command:</p>
<blockquote>
<div><p>adduser -q –gecos “” –home /customhome/river –disabled-password river</p>
</div></blockquote>
<p>when the user ‘river’ is created.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.admin_groups">
<code class="sig-name descname">admin_groups</code><em class="property"> c.PAMAuthenticator.admin_groups = Set()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.admin_groups" title="Permalink to this definition">¶</a></dt>
<dd><p>Authoritative list of user groups that determine admin access.
Users not in these groups can still be granted admin status through admin_users.</p>
<p>White/blacklisting rules still apply.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.admin_users">
<code class="sig-name descname">admin_users</code><em class="property"> c.PAMAuthenticator.admin_users = Set()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.admin_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of users that will have admin rights on this JupyterHub.</p>
<dl class="simple">
<dt>Admin users have extra privileges:</dt><dd><ul class="simple">
<li><p>Use the admin panel to see list of users logged in</p></li>
<li><p>Add / remove users in some authenticators</p></li>
<li><p>Restart / halt the hub</p></li>
<li><p>Start / stop users’ single-user servers</p></li>
<li><p>Can access each individual users’ single-user server (if configured)</p></li>
</ul>
</dd>
</dl>
<p>Admin access should be treated the same way root access is.</p>
<p>Defaults to an empty set, in which case no user has admin access.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.auth_refresh_age">
<code class="sig-name descname">auth_refresh_age</code><em class="property"> c.PAMAuthenticator.auth_refresh_age = Int(300)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.auth_refresh_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The max age (in seconds) of authentication info
before forcing a refresh of user auth info.</p>
<p>Refreshing auth info allows, e.g. requesting/re-validating auth tokens.</p>
<p>See <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> for what happens when user auth info is refreshed
(nothing by default).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.auto_login">
<code class="sig-name descname">auto_login</code><em class="property"> c.PAMAuthenticator.auto_login = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.auto_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically begin the login process</p>
<p>rather than starting with a “Login with…” link at <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code></p>
<p>To work, <code class="docutils literal notranslate"><span class="pre">.login_url()</span></code> must give a URL other than the default <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code>,
such as an oauth handler or another automatic login handler,
registered with <code class="docutils literal notranslate"><span class="pre">.get_handlers()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.blacklist">
<code class="sig-name descname">blacklist</code><em class="property"> c.PAMAuthenticator.blacklist = Set()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklist of usernames that are not allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can not log in. This is an
additional blacklist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.check_account">
<code class="sig-name descname">check_account</code><em class="property"> c.PAMAuthenticator.check_account = Bool(True)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.check_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to check the user’s account status via PAM during authentication.</p>
<p>The PAM account stack performs non-authentication based account
management. It is typically used to restrict/permit access to a
service and this step is needed to access the host’s user access control.</p>
<p>Disabling this can be dangerous as authenticated but unauthorized users may
be granted access and, therefore, arbitrary execution on the system.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.create_system_users">
<code class="sig-name descname">create_system_users</code><em class="property"> c.PAMAuthenticator.create_system_users = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.create_system_users" title="Permalink to this definition">¶</a></dt>
<dd><p>If set to True, will attempt to create local system users if they do not exist already.</p>
<p>Supports Linux and BSD variants only.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.enable_auth_state">
<code class="sig-name descname">enable_auth_state</code><em class="property"> c.PAMAuthenticator.enable_auth_state = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.enable_auth_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable persisting auth_state (if available).</p>
<p>auth_state will be encrypted and stored in the Hub’s database.
This can include things like authentication tokens, etc.
to be passed to Spawners as environment variables.</p>
<p>Encrypting auth_state requires the cryptography package.</p>
<p>Additionally, the JUPYTERHUB_CRYPT_KEY environment variable must
contain one (or more, separated by ;) 32B encryption keys.
These can be either base64 or hex-encoded.</p>
<p>If encryption is unavailable, auth_state cannot be persisted.</p>
<p>New in JupyterHub 0.8</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.encoding">
<code class="sig-name descname">encoding</code><em class="property"> c.PAMAuthenticator.encoding = Unicode('utf8')</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>The text encoding to use when communicating with PAM</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.group_whitelist">
<code class="sig-name descname">group_whitelist</code><em class="property"> c.PAMAuthenticator.group_whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.group_whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist all users from this UNIX group.</p>
<p>This makes the username whitelist ineffective.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.open_sessions">
<code class="sig-name descname">open_sessions</code><em class="property"> c.PAMAuthenticator.open_sessions = Bool(True)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.open_sessions" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether to open a new PAM session when spawners are started.</p>
<p>This may trigger things like mounting shared filsystems,
loading credentials, etc. depending on system configuration,
but it does not always work.</p>
<p>If any errors are encountered when opening/closing PAM sessions,
this is automatically set to False.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.pam_normalize_username">
<code class="sig-name descname">pam_normalize_username</code><em class="property"> c.PAMAuthenticator.pam_normalize_username = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.pam_normalize_username" title="Permalink to this definition">¶</a></dt>
<dd><p>Round-trip the username via PAM lookups to make sure it is unique</p>
<p>PAM can accept multiple usernames that map to the same user,
for example DOMAINusername in some cases.  To prevent this,
convert username into uid, then back to uid to normalize.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.post_auth_hook">
<code class="sig-name descname">post_auth_hook</code><em class="property"> c.PAMAuthenticator.post_auth_hook = Any(None)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.post_auth_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional hook function that you can implement to do some
bootstrapping work during authentication. For example, loading user account
details from an external system.</p>
<p>This function is called after the user has passed all authentication checks
and is ready to successfully authenticate. This function must return the
authentication dict reguardless of changes to it.</p>
<p>This maybe a coroutine.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pwd</span>
<span class="k">def</span> <span class="nf">my_hook</span><span class="p">(</span><span class="n">authenticator</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">authentication</span><span class="p">):</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwnam</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="n">spawn_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pw_data&#39;</span><span class="p">:</span> <span class="n">user_data</span>
        <span class="s1">&#39;gid_list&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getgrouplist</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">user_data</span><span class="o">.</span><span class="n">pw_gid</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">][</span><span class="s1">&#39;spawn_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spawn_data</span>

    <span class="k">return</span> <span class="n">authentication</span>

<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">post_auth_hook</span> <span class="o">=</span> <span class="n">my_hook</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.refresh_pre_spawn">
<code class="sig-name descname">refresh_pre_spawn</code><em class="property"> c.PAMAuthenticator.refresh_pre_spawn = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.refresh_pre_spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force refresh of auth prior to spawn.</p>
<p>This forces <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> to be called prior to launching
a server, to ensure that auth state is up-to-date.</p>
<p>This can be important when e.g. auth tokens that may have expired
are passed to the spawner via environment variables from auth_state.</p>
<p>If refresh_user cannot refresh the user auth data,
launch will fail until the user logs in again.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.service">
<code class="sig-name descname">service</code><em class="property"> c.PAMAuthenticator.service = Unicode('login')</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.service" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the PAM service to use for authentication</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.uids">
<code class="sig-name descname">uids</code><em class="property"> c.PAMAuthenticator.uids = Dict()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.uids" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary of uids to use at user creation time.
This helps ensure that users created from the database
get the same uid each time they are created
in temporary deployments or containers.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.username_map">
<code class="sig-name descname">username_map</code><em class="property"> c.PAMAuthenticator.username_map = Dict()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.username_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary mapping authenticator usernames to JupyterHub users.</p>
<p>Primarily used to normalize OAuth user names to local users.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.username_pattern">
<code class="sig-name descname">username_pattern</code><em class="property"> c.PAMAuthenticator.username_pattern = Unicode('')</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.username_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression pattern that all valid usernames must match.</p>
<p>If a username does not match the pattern specified here, authentication will not be attempted.</p>
<p>If not set, allow any username.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.PAMAuthenticator.whitelist">
<code class="sig-name descname">whitelist</code><em class="property"> c.PAMAuthenticator.whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.PAMAuthenticator.whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist of usernames that are allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can log in. This is an
additional whitelist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="dummyauthenticator">
<h3><a class="reference internal" href="#jupyterhub.auth.DummyAuthenticator" title="jupyterhub.auth.DummyAuthenticator"><code class="xref py py-class docutils literal notranslate"><span class="pre">DummyAuthenticator</span></code></a><a class="headerlink" href="#dummyauthenticator" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.auth.DummyAuthenticator">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.auth.</code><code class="sig-name descname">DummyAuthenticator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator" title="Permalink to this definition">¶</a></dt>
<dd><p>Dummy Authenticator for testing</p>
<p>By default, any username + password is allowed
If a non-empty password is set, any username will be allowed
if it logs in with that password.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.</span></p>
</div>
<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.admin_users">
<code class="sig-name descname">admin_users</code><em class="property"> c.DummyAuthenticator.admin_users = Set()</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.admin_users" title="Permalink to this definition">¶</a></dt>
<dd><p>Set of users that will have admin rights on this JupyterHub.</p>
<dl class="simple">
<dt>Admin users have extra privileges:</dt><dd><ul class="simple">
<li><p>Use the admin panel to see list of users logged in</p></li>
<li><p>Add / remove users in some authenticators</p></li>
<li><p>Restart / halt the hub</p></li>
<li><p>Start / stop users’ single-user servers</p></li>
<li><p>Can access each individual users’ single-user server (if configured)</p></li>
</ul>
</dd>
</dl>
<p>Admin access should be treated the same way root access is.</p>
<p>Defaults to an empty set, in which case no user has admin access.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.auth_refresh_age">
<code class="sig-name descname">auth_refresh_age</code><em class="property"> c.DummyAuthenticator.auth_refresh_age = Int(300)</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.auth_refresh_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The max age (in seconds) of authentication info
before forcing a refresh of user auth info.</p>
<p>Refreshing auth info allows, e.g. requesting/re-validating auth tokens.</p>
<p>See <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> for what happens when user auth info is refreshed
(nothing by default).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.auto_login">
<code class="sig-name descname">auto_login</code><em class="property"> c.DummyAuthenticator.auto_login = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.auto_login" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically begin the login process</p>
<p>rather than starting with a “Login with…” link at <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code></p>
<p>To work, <code class="docutils literal notranslate"><span class="pre">.login_url()</span></code> must give a URL other than the default <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code>,
such as an oauth handler or another automatic login handler,
registered with <code class="docutils literal notranslate"><span class="pre">.get_handlers()</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 0.8.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.blacklist">
<code class="sig-name descname">blacklist</code><em class="property"> c.DummyAuthenticator.blacklist = Set()</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Blacklist of usernames that are not allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can not log in. This is an
additional blacklist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.enable_auth_state">
<code class="sig-name descname">enable_auth_state</code><em class="property"> c.DummyAuthenticator.enable_auth_state = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.enable_auth_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable persisting auth_state (if available).</p>
<p>auth_state will be encrypted and stored in the Hub’s database.
This can include things like authentication tokens, etc.
to be passed to Spawners as environment variables.</p>
<p>Encrypting auth_state requires the cryptography package.</p>
<p>Additionally, the JUPYTERHUB_CRYPT_KEY environment variable must
contain one (or more, separated by ;) 32B encryption keys.
These can be either base64 or hex-encoded.</p>
<p>If encryption is unavailable, auth_state cannot be persisted.</p>
<p>New in JupyterHub 0.8</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.password">
<code class="sig-name descname">password</code><em class="property"> c.DummyAuthenticator.password = Unicode('')</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.password" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a global password for all users wanting to log in.</p>
<p>This allows users with any username to log in with the same static password.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.post_auth_hook">
<code class="sig-name descname">post_auth_hook</code><em class="property"> c.DummyAuthenticator.post_auth_hook = Any(None)</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.post_auth_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional hook function that you can implement to do some
bootstrapping work during authentication. For example, loading user account
details from an external system.</p>
<p>This function is called after the user has passed all authentication checks
and is ready to successfully authenticate. This function must return the
authentication dict reguardless of changes to it.</p>
<p>This maybe a coroutine.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">pwd</span>
<span class="k">def</span> <span class="nf">my_hook</span><span class="p">(</span><span class="n">authenticator</span><span class="p">,</span> <span class="n">handler</span><span class="p">,</span> <span class="n">authentication</span><span class="p">):</span>
    <span class="n">user_data</span> <span class="o">=</span> <span class="n">pwd</span><span class="o">.</span><span class="n">getpwnam</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">])</span>
    <span class="n">spawn_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;pw_data&#39;</span><span class="p">:</span> <span class="n">user_data</span>
        <span class="s1">&#39;gid_list&#39;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">getgrouplist</span><span class="p">(</span><span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">user_data</span><span class="o">.</span><span class="n">pw_gid</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">authentication</span><span class="p">[</span><span class="s1">&#39;auth_state&#39;</span><span class="p">][</span><span class="s1">&#39;spawn_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">spawn_data</span>

    <span class="k">return</span> <span class="n">authentication</span>

<span class="n">c</span><span class="o">.</span><span class="n">Authenticator</span><span class="o">.</span><span class="n">post_auth_hook</span> <span class="o">=</span> <span class="n">my_hook</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.refresh_pre_spawn">
<code class="sig-name descname">refresh_pre_spawn</code><em class="property"> c.DummyAuthenticator.refresh_pre_spawn = Bool(False)</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.refresh_pre_spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Force refresh of auth prior to spawn.</p>
<p>This forces <a class="reference internal" href="#jupyterhub.auth.Authenticator.refresh_user" title="jupyterhub.auth.Authenticator.refresh_user"><code class="xref py py-meth docutils literal notranslate"><span class="pre">refresh_user()</span></code></a> to be called prior to launching
a server, to ensure that auth state is up-to-date.</p>
<p>This can be important when e.g. auth tokens that may have expired
are passed to the spawner via environment variables from auth_state.</p>
<p>If refresh_user cannot refresh the user auth data,
launch will fail until the user logs in again.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.username_map">
<code class="sig-name descname">username_map</code><em class="property"> c.DummyAuthenticator.username_map = Dict()</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.username_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary mapping authenticator usernames to JupyterHub users.</p>
<p>Primarily used to normalize OAuth user names to local users.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.username_pattern">
<code class="sig-name descname">username_pattern</code><em class="property"> c.DummyAuthenticator.username_pattern = Unicode('')</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.username_pattern" title="Permalink to this definition">¶</a></dt>
<dd><p>Regular expression pattern that all valid usernames must match.</p>
<p>If a username does not match the pattern specified here, authentication will not be attempted.</p>
<p>If not set, allow any username.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.auth.DummyAuthenticator.whitelist">
<code class="sig-name descname">whitelist</code><em class="property"> c.DummyAuthenticator.whitelist = Set()</em><a class="headerlink" href="#jupyterhub.auth.DummyAuthenticator.whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Whitelist of usernames that are allowed to log in.</p>
<p>Use this with supported authenticators to restrict which users can log in. This is an
additional whitelist that further restricts users, beyond whatever restrictions the
authenticator has in place.</p>
<p>If empty, does not perform any additional restriction.</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="app.html" title="previous page">Application configuration</a>
    <a class='right-next' id="next-link" href="spawner.html" title="next page">Spawners</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2016, Project Jupyter team.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>