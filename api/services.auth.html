

<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Services Authentication &#8212; JupyterHub 1.2.0dev documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css" integrity="sha384-KA6wR/X5RY4zFAHpv/CnoG2UW1uogYfdnP67Uv7eULvTveboZJg0qUpmJZb5VqzN" crossorigin="anonymous">
    <link href="../_static/css/index.css" rel="stylesheet">
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Contributing" href="../contributing/index.html" />
    <link rel="prev" title="Services" href="service.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="docsearch:language" content="en">
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    
    <a class="navbar-brand" href="../index.html">
      <img src="../_static/logo.png" class="logo" alt="logo">
    </a>
    
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../installation-guide.html">Installation</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../getting-started/index.html">Get Started</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../reference/index.html">Technical Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../index-admin.html">Administrator’s Guide</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="index.html">JupyterHub API</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../contributing/index.html">Contributing</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../index-about.html">About</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar">

<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>


<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

  <div class="bd-toc-item active">
  

  <ul class="nav bd-sidenav">
      
      
      
      
      
      
      
      
      
      
        
          
              <li class="">
                  <a href="app.html">Application configuration</a>
              </li>
          
        
          
              <li class="">
                  <a href="auth.html">Authenticators</a>
              </li>
          
        
          
              <li class="">
                  <a href="spawner.html">Spawners</a>
              </li>
          
        
          
              <li class="">
                  <a href="proxy.html">Proxies</a>
              </li>
          
        
          
              <li class="">
                  <a href="user.html">Users</a>
              </li>
          
        
          
              <li class="">
                  <a href="service.html">Services</a>
              </li>
          
        
          
              <li class="active">
                  <a href="">Services Authentication</a>
              </li>
          
        
      
      
      
      
      
      
    </ul>

</nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#module-jupyterhub.services.auth" class="nav-link">Module: jupyterhub.services.auth</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#hubauth" class="nav-link">HubAuth</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#huboauth" class="nav-link">HubOAuth</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#hubauthenticated" class="nav-link">HubAuthenticated</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#huboauthenticated" class="nav-link">HubOAuthenticated</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#huboauthcallbackhandler" class="nav-link">HubOAuthCallbackHandler</a>
        </li>
    
            </ul>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="services-authentication">
<h1>Services Authentication<a class="headerlink" href="#services-authentication" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-jupyterhub.services.auth">
<span id="module-jupyterhub-services-auth"></span><h2>Module: <a class="reference internal" href="#module-jupyterhub.services.auth" title="jupyterhub.services.auth"><code class="xref py py-mod docutils literal notranslate"><span class="pre">jupyterhub.services.auth</span></code></a><a class="headerlink" href="#module-jupyterhub.services.auth" title="Permalink to this headline">¶</a></h2>
<p>Authenticating services with JupyterHub.</p>
<p>Cookies are sent to the Hub for verification. The Hub replies with a JSON
model describing the authenticated user.</p>
<p><code class="docutils literal notranslate"><span class="pre">HubAuth</span></code> can be used in any application, even outside tornado.</p>
<p><code class="docutils literal notranslate"><span class="pre">HubAuthenticated</span></code> is a mixin class for tornado handlers that should
authenticate with the Hub.</p>
<div class="section" id="hubauth">
<h3><a class="reference internal" href="#jupyterhub.services.auth.HubAuth" title="jupyterhub.services.auth.HubAuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubAuth</span></code></a><a class="headerlink" href="#hubauth" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.services.auth.HubAuth">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.services.auth.</code><code class="sig-name descname">HubAuth</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for authenticating with JupyterHub</p>
<p>This can be used by any application.</p>
<p>If using tornado, use via <a class="reference internal" href="#jupyterhub.services.auth.HubAuthenticated" title="jupyterhub.services.auth.HubAuthenticated"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubAuthenticated</span></code></a> mixin.
If using manually, use the <code class="docutils literal notranslate"><span class="pre">.user_for_cookie(cookie_value)</span></code> method
to identify the user corresponding to a given cookie value.</p>
<p>The following config must be set:</p>
<ul class="simple">
<li><p>api_token (token for authenticating with JupyterHub API),
fetched from the JUPYTERHUB_API_TOKEN env by default.</p></li>
</ul>
<p>The following config MAY be set:</p>
<ul class="simple">
<li><p>api_url: the base URL of the Hub’s internal API,
fetched from JUPYTERHUB_API_URL by default.</p></li>
<li><p>cookie_cache_max_age: the number of seconds responses
from the Hub should be cached.</p></li>
<li><p>login_url (the <em>public</em> <code class="docutils literal notranslate"><span class="pre">/hub/login</span></code> URL of the Hub).</p></li>
<li><p>cookie_name: the name of the cookie I should be using,
if different from the default (unlikely).</p></li>
</ul>
<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.api_token">
<code class="sig-name descname">api_token</code><em class="property"> c.HubAuth.api_token = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.api_token" title="Permalink to this definition">¶</a></dt>
<dd><p>API key for accessing Hub API.</p>
<p>Generate with <code class="docutils literal notranslate"><span class="pre">jupyterhub</span> <span class="pre">token</span> <span class="pre">[username]</span></code> or add to JupyterHub.services config.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.api_url">
<code class="sig-name descname">api_url</code><em class="property"> c.HubAuth.api_url = Unicode('http://127.0.0.1:8081/hub/api')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.api_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The base API URL of the Hub.</p>
<p>Typically <code class="docutils literal notranslate"><span class="pre">http://hub-ip:hub-port/hub/api</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.base_url">
<code class="sig-name descname">base_url</code><em class="property"> c.HubAuth.base_url = Unicode('/')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.base_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The base URL prefix of this application</p>
<p>e.g. /services/service-name/ or /user/name/</p>
<p>Default: get from JUPYTERHUB_SERVICE_PREFIX</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.cache_max_age">
<code class="sig-name descname">cache_max_age</code><em class="property"> c.HubAuth.cache_max_age = Int(300)</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.cache_max_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum time (in seconds) to cache the Hub’s responses for authentication.</p>
<p>A larger value reduces load on the Hub and occasional response lag.
A smaller value reduces propagation time of changes on the Hub (rare).</p>
<p>Default: 300 (five minutes)</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.certfile">
<code class="sig-name descname">certfile</code><em class="property"> c.HubAuth.certfile = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.certfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl cert to use for requests</p>
<p>Use with keyfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.client_ca">
<code class="sig-name descname">client_ca</code><em class="property"> c.HubAuth.client_ca = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.client_ca" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl certificate authority to use to verify requests</p>
<p>Use with keyfile and certfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.cookie_name">
<code class="sig-name descname">cookie_name</code><em class="property"> c.HubAuth.cookie_name = Unicode('jupyterhub-services')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.cookie_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the cookie I should be looking for</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.cookie_options">
<code class="sig-name descname">cookie_options</code><em class="property"> c.HubAuth.cookie_options = Dict()</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.cookie_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional options to pass when setting cookies.</p>
<p>Can include things like <code class="docutils literal notranslate"><span class="pre">expires_days=None</span></code> for session-expiry
or <code class="docutils literal notranslate"><span class="pre">secure=True</span></code> if served on HTTPS and default HTTPS discovery fails
(e.g. behind some proxies).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.hub_host">
<code class="sig-name descname">hub_host</code><em class="property"> c.HubAuth.hub_host = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.hub_host" title="Permalink to this definition">¶</a></dt>
<dd><p>The public host of JupyterHub</p>
<p>Only used if JupyterHub is spreading servers across subdomains.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.hub_prefix">
<code class="sig-name descname">hub_prefix</code><em class="property"> c.HubAuth.hub_prefix = Unicode('/hub/')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.hub_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL prefix for the Hub itself.</p>
<p>Typically /hub/</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.keyfile">
<code class="sig-name descname">keyfile</code><em class="property"> c.HubAuth.keyfile = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.keyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl key to use for requests</p>
<p>Use with certfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuth.login_url">
<code class="sig-name descname">login_url</code><em class="property"> c.HubAuth.login_url = Unicode('/hub/login')</em><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.login_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The login URL to use</p>
<p>Typically /hub/login</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuth.get_session_id">
<code class="sig-name descname">get_session_id</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.get_session_id" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the jupyterhub session id</p>
<p>from the jupyterhub-session-id cookie.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuth.get_token">
<code class="sig-name descname">get_token</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.get_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the user token from a request</p>
<ul class="simple">
<li><p>in URL parameters: ?token=&lt;token&gt;</p></li>
<li><p>in header: Authorization: token &lt;token&gt;</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuth.get_user">
<code class="sig-name descname">get_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the Hub user for a given tornado handler.</p>
<p>Checks cookie with the Hub to identify the current user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>handler</strong> (<em>tornado.web.RequestHandler</em>) – the current request handler</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The user model, if a user is identified, None if authentication fails.</p>
<p>The ‘name’ field contains the user’s name.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>user_model (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuth.user_for_cookie">
<code class="sig-name descname">user_for_cookie</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">encrypted_cookie</span></em>, <em class="sig-param"><span class="n">use_cache</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">session_id</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.user_for_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Ask the Hub to identify the user for a given cookie.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>encrypted_cookie</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – the cookie value (not decrypted, the Hub will do that)</p></li>
<li><p><strong>use_cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Specify use_cache=False to skip cached cookie values (default: True)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The user model, if a user is identified, None if authentication fails.</p>
<p>The ‘name’ field contains the user’s name.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>user_model (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuth.user_for_token">
<code class="sig-name descname">user_for_token</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">token</span></em>, <em class="sig-param"><span class="n">use_cache</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">session_id</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuth.user_for_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Ask the Hub to identify the user for a given token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – the token</p></li>
<li><p><strong>use_cache</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Specify use_cache=False to skip cached cookie values (default: True)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>The user model, if a user is identified, None if authentication fails.</p>
<p>The ‘name’ field contains the user’s name.</p>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>user_model (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="huboauth">
<h3><a class="reference internal" href="#jupyterhub.services.auth.HubOAuth" title="jupyterhub.services.auth.HubOAuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubOAuth</span></code></a><a class="headerlink" href="#huboauth" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.services.auth.HubOAuth">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.services.auth.</code><code class="sig-name descname">HubOAuth</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth" title="Permalink to this definition">¶</a></dt>
<dd><p>HubAuth using OAuth for login instead of cookies set by the Hub.</p>
<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.api_token">
<code class="sig-name descname">api_token</code><em class="property"> c.HubOAuth.api_token = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.api_token" title="Permalink to this definition">¶</a></dt>
<dd><p>API key for accessing Hub API.</p>
<p>Generate with <code class="docutils literal notranslate"><span class="pre">jupyterhub</span> <span class="pre">token</span> <span class="pre">[username]</span></code> or add to JupyterHub.services config.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.api_url">
<code class="sig-name descname">api_url</code><em class="property"> c.HubOAuth.api_url = Unicode('http://127.0.0.1:8081/hub/api')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.api_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The base API URL of the Hub.</p>
<p>Typically <code class="docutils literal notranslate"><span class="pre">http://hub-ip:hub-port/hub/api</span></code></p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.base_url">
<code class="sig-name descname">base_url</code><em class="property"> c.HubOAuth.base_url = Unicode('/')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.base_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The base URL prefix of this application</p>
<p>e.g. /services/service-name/ or /user/name/</p>
<p>Default: get from JUPYTERHUB_SERVICE_PREFIX</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.cache_max_age">
<code class="sig-name descname">cache_max_age</code><em class="property"> c.HubOAuth.cache_max_age = Int(300)</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.cache_max_age" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum time (in seconds) to cache the Hub’s responses for authentication.</p>
<p>A larger value reduces load on the Hub and occasional response lag.
A smaller value reduces propagation time of changes on the Hub (rare).</p>
<p>Default: 300 (five minutes)</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.certfile">
<code class="sig-name descname">certfile</code><em class="property"> c.HubOAuth.certfile = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.certfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl cert to use for requests</p>
<p>Use with keyfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.client_ca">
<code class="sig-name descname">client_ca</code><em class="property"> c.HubOAuth.client_ca = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.client_ca" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl certificate authority to use to verify requests</p>
<p>Use with keyfile and certfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.cookie_options">
<code class="sig-name descname">cookie_options</code><em class="property"> c.HubOAuth.cookie_options = Dict()</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.cookie_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Additional options to pass when setting cookies.</p>
<p>Can include things like <code class="docutils literal notranslate"><span class="pre">expires_days=None</span></code> for session-expiry
or <code class="docutils literal notranslate"><span class="pre">secure=True</span></code> if served on HTTPS and default HTTPS discovery fails
(e.g. behind some proxies).</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.hub_host">
<code class="sig-name descname">hub_host</code><em class="property"> c.HubOAuth.hub_host = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.hub_host" title="Permalink to this definition">¶</a></dt>
<dd><p>The public host of JupyterHub</p>
<p>Only used if JupyterHub is spreading servers across subdomains.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.hub_prefix">
<code class="sig-name descname">hub_prefix</code><em class="property"> c.HubOAuth.hub_prefix = Unicode('/hub/')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.hub_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL prefix for the Hub itself.</p>
<p>Typically /hub/</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.keyfile">
<code class="sig-name descname">keyfile</code><em class="property"> c.HubOAuth.keyfile = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.keyfile" title="Permalink to this definition">¶</a></dt>
<dd><p>The ssl key to use for requests</p>
<p>Use with certfile</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.login_url">
<code class="sig-name descname">login_url</code><em class="property"> c.HubOAuth.login_url = Unicode('/hub/login')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.login_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The login URL to use</p>
<p>Typically /hub/login</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.oauth_authorization_url">
<code class="sig-name descname">oauth_authorization_url</code><em class="property"> c.HubOAuth.oauth_authorization_url = Unicode('/hub/api/oauth2/authorize')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.oauth_authorization_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL to redirect to when starting the OAuth process</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.oauth_client_id">
<code class="sig-name descname">oauth_client_id</code><em class="property"> c.HubOAuth.oauth_client_id = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.oauth_client_id" title="Permalink to this definition">¶</a></dt>
<dd><p>The OAuth client ID for this application.</p>
<p>Use JUPYTERHUB_CLIENT_ID by default.</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.oauth_redirect_uri">
<code class="sig-name descname">oauth_redirect_uri</code><em class="property"> c.HubOAuth.oauth_redirect_uri = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.oauth_redirect_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>OAuth redirect URI</p>
<p>Should generally be /base_url/oauth_callback</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubOAuth.oauth_token_url">
<code class="sig-name descname">oauth_token_url</code><em class="property"> c.HubOAuth.oauth_token_url = Unicode('')</em><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.oauth_token_url" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL for requesting an OAuth token from JupyterHub</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.clear_cookie">
<code class="sig-name descname">clear_cookie</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.clear_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the OAuth cookie</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.cookie_name">
<em class="property">property </em><code class="sig-name descname">cookie_name</code><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.cookie_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Use OAuth client_id for cookie name</p>
<p>because we don’t want to use the same cookie name
across OAuth clients.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.generate_state">
<code class="sig-name descname">generate_state</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">next_url</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">extra_state</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.generate_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a state string, given a next_url redirect target</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>(</strong><strong>str</strong><strong>)</strong> (<em>next_url</em>) – </p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>state (str)</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The base64-encoded state string.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.get_next_url">
<code class="sig-name descname">get_next_url</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">b64_state</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.get_next_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the next_url for redirection, given an encoded OAuth state</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.get_state_cookie_name">
<code class="sig-name descname">get_state_cookie_name</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">b64_state</span><span class="o">=</span><span class="default_value">''</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.get_state_cookie_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cookie name for oauth state, given an encoded OAuth state</p>
<p>Cookie name is stored in the state itself because the cookie name
is randomized to deal with races between concurrent oauth sequences.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.set_cookie">
<code class="sig-name descname">set_cookie</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">access_token</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a cookie recording OAuth result</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.set_state_cookie">
<code class="sig-name descname">set_state_cookie</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">handler</span></em>, <em class="sig-param"><span class="n">next_url</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.set_state_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate an OAuth state and store it in a cookie</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>(</strong><strong>RequestHandler</strong><strong>)</strong> (<em>handler</em>) – </p></li>
<li><p><strong>(</strong><strong>str</strong><strong>)</strong> (<em>next_url</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>state (str)</strong></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>The OAuth state that has been stored in the cookie (url safe, base64-encoded)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.state_cookie_name">
<em class="property">property </em><code class="sig-name descname">state_cookie_name</code><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.state_cookie_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The cookie name for storing OAuth state</p>
<p>This cookie is only live for the duration of the OAuth handshake.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubOAuth.token_for_code">
<code class="sig-name descname">token_for_code</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">code</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuth.token_for_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Get token for OAuth temporary code</p>
<p>This is the last step of OAuth login.
Should be called in OAuth Callback handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>code</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – oauth code for finishing OAuth login</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>JupyterHub API Token</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>token (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)">str</a>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="hubauthenticated">
<h3><a class="reference internal" href="#jupyterhub.services.auth.HubAuthenticated" title="jupyterhub.services.auth.HubAuthenticated"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubAuthenticated</span></code></a><a class="headerlink" href="#hubauthenticated" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.services.auth.HubAuthenticated">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.services.auth.</code><code class="sig-name descname">HubAuthenticated</code><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Mixin for tornado handlers that are authenticated with JupyterHub</p>
<p>A handler that mixes this in must have the following attributes/properties:</p>
<ul class="simple">
<li><p>.hub_auth: A HubAuth instance</p></li>
<li><p>.hub_users: A set of usernames to allow.
If left unspecified or None, username will not be checked.</p></li>
<li><p>.hub_groups: A set of group names to allow.
If left unspecified or None, groups will not be checked.</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">HubAuthenticated</span><span class="p">,</span> <span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="n">hub_users</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;inara&#39;</span><span class="p">,</span> <span class="s1">&#39;mal&#39;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hub_auth</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hub_auth</span> <span class="o">=</span> <span class="n">hub_auth</span>

    <span class="nd">@web</span><span class="o">.</span><span class="n">authenticated</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuthenticated.allow_all">
<em class="property">property </em><code class="sig-name descname">allow_all</code><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated.allow_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Property indicating that all successfully identified user
or service should be allowed.</p>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuthenticated.check_hub_user">
<code class="sig-name descname">check_hub_user</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">model</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated.check_hub_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether Hub-authenticated user or service should be allowed.</p>
<p>Returns the input if the user should be allowed, None otherwise.</p>
<p>Override if you want to check anything other than the username’s presence in hub_users list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – the user or service model returned from <a class="reference internal" href="#jupyterhub.services.auth.HubAuth" title="jupyterhub.services.auth.HubAuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubAuth</span></code></a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The user model if the user should be allowed, None otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>user_model (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuthenticated.get_current_user">
<code class="sig-name descname">get_current_user</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated.get_current_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Tornado’s authentication method</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>The user model, if a user is identified, None if authentication fails.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>user_model (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)">dict</a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="jupyterhub.services.auth.HubAuthenticated.get_login_url">
<code class="sig-name descname">get_login_url</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated.get_login_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the Hub’s login URL</p>
</dd></dl>

<dl class="py attribute">
<dt id="jupyterhub.services.auth.HubAuthenticated.hub_auth_class">
<code class="sig-name descname">hub_auth_class</code><a class="headerlink" href="#jupyterhub.services.auth.HubAuthenticated.hub_auth_class" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#jupyterhub.services.auth.HubAuth" title="jupyterhub.services.auth.HubAuth"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubAuth</span></code></a></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="huboauthenticated">
<h3><a class="reference internal" href="#jupyterhub.services.auth.HubOAuthenticated" title="jupyterhub.services.auth.HubOAuthenticated"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubOAuthenticated</span></code></a><a class="headerlink" href="#huboauthenticated" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.services.auth.HubOAuthenticated">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.services.auth.</code><code class="sig-name descname">HubOAuthenticated</code><a class="headerlink" href="#jupyterhub.services.auth.HubOAuthenticated" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple subclass of HubAuthenticated using OAuth instead of old shared cookies</p>
</dd></dl>

</div>
<div class="section" id="huboauthcallbackhandler">
<h3><a class="reference internal" href="#jupyterhub.services.auth.HubOAuthCallbackHandler" title="jupyterhub.services.auth.HubOAuthCallbackHandler"><code class="xref py py-class docutils literal notranslate"><span class="pre">HubOAuthCallbackHandler</span></code></a><a class="headerlink" href="#huboauthcallbackhandler" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="jupyterhub.services.auth.HubOAuthCallbackHandler">
<em class="property">class </em><code class="sig-prename descclassname">jupyterhub.services.auth.</code><code class="sig-name descname">HubOAuthCallbackHandler</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">application</span><span class="p">:</span> <span class="n">tornado.web.Application</span></em>, <em class="sig-param"><span class="n">request</span><span class="p">:</span> <span class="n">tornado.httputil.HTTPServerRequest</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span></em><span class="sig-paren">)</span><a class="headerlink" href="#jupyterhub.services.auth.HubOAuthCallbackHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>OAuth Callback handler</p>
<p>Finishes the OAuth flow, setting a cookie to record the user’s info.</p>
<p>Should be registered at <code class="docutils literal notranslate"><span class="pre">SERVICE_PREFIX/oauth_callback</span></code></p>
</dd></dl>

</div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="service.html" title="previous page">Services</a>
    <a class='right-next' id="next-link" href="../contributing/index.html" title="next page">Contributing</a>

              </div>
              
          </main>
          

      </div>
    </div>

    <script src="../_static/js/index.js"></script>
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2016, Project Jupyter team.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>